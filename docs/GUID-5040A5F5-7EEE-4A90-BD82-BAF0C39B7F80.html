<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE11" /><meta name="copyright" content="(C) Copyright 2022" />
<meta name="DC.rights.owner" content="(C) Copyright 2022" />
<meta name="DC.type" content="topic" />
<meta name="DC.title" content="Building and Running the Application on SAM E54 Curiosity Ultra Development Board" />
<meta name="DC.relation" scheme="URI" content="GUID-85C71EF8-14CC-4BC7-814C-1248E7D2D6B6.html" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="building-and-running-the-application-on-sam-e54-curiosity-ultra-development-board" />
<link rel="stylesheet" type="text/css" href="stylesheets/atmel.css" />
<title>Building and Running the Application on SAM E54 Curiosity Ultra Development Board</title>
<meta name="Microsoft.Help.Id" content="GUID-55139F81-F253-49E8-BF9E-53CD046C59AF-building-and-running-the-application-on-sam-e54-curiosity-ultra-development-board" />
<meta name="Microsoft.Help.TocParent" content="GUID-55139F81-F253-49E8-BF9E-53CD046C59AF" />
<meta name="Microsoft.Help.TocOrder" content="0" />
<meta name="Microsoft.Help.Locale" content="en-US" />
<meta name="Microsoft.Help.TopicLocale" content="en-US" />
<meta name="Microsoft.Help.DisplayVersion" content="MPLAB® Harmony TFLite for Microcontroller Library Reference A 01/2022" />
<script language="javascript">
       
       if (window.parent.location.protocol != 'file:') {
				document.addEventListener('click', function(e) {
				    if (e.target) {
               if (e.target.nodeName == "A" ) {
                    if (!e.target.target) {
                      e.preventDefault();
                      e.stopPropagation();
                              
                      var origUrl = window.parent.location.href.substr(0, window.parent.location.href.indexOf("?"));
                      if (origUrl.length === 0) {
                          origUrl = window.parent.location.href;
                      }
                      var href= e.target.getAttribute("href");
                      var parts = href.split("#");
          
                      var url = "";
                      if (parts.length == 2 ) {
                        if (!parts[0].length) {
                            url = window.parent.location.search.replace('?','')
                        } else {
                            url = parts[0].replace('.html','');
                        }
                      } else {
                        url = parts[0].replace('.html','');
                      }

                      if (parts.length == 2) {
                          url += "#" + parts[1];
                      }
    
                      window.parent.location.href = origUrl + "?" + url;

                      return false;
                    }
               }
            }
				});
			}

		</script><script language="javascript">
        function cpy(id, button) {
        
            var element = document.getElementById(id);
            var content = element.getAttribute("content");
            var textArea = document.createElement("textarea");
            
            // Place in the top-left corner of screen regardless of scroll position.
            textArea.style.position = 'fixed';
            textArea.style.top = 0;
            textArea.style.left = 0;
            
            // Ensure it has a small width and height. Setting to 1px / 1em
            // doesn't work as this gives a negative w/h on some browsers.
            textArea.style.width = '2em';
            textArea.style.height = '2em';
            
            // We don't need padding, reducing the size if it does flash render.
            textArea.style.padding = 0;
            
            // Clean up any borders.
            textArea.style.border = 'none';
            textArea.style.outline = 'none';
            textArea.style.boxShadow = 'none';
            
            // Avoid flash of the white box if rendered for any reason.
            textArea.style.background = 'transparent';
            
            
            textArea.value = content;
            
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
               var successful = document.execCommand('copy');
               var msg = successful ? 'successful' : 'unsuccessful';
               if (!button.classList.contains("copied")){
                  button.textContent = "Copied";
                  button.classList.add("copied");
                  setTimeout(function(){
                    button.textContent = "Copy";
                    button.classList.remove("copied");
                  },1000);
               }
            } catch (err) {
              console.log('Oops, unable to copy');
            }
            
            document.body.removeChild(textArea);
        }
      </script><script language="javascript">
          
          // Add the MathML namespace to html
          var html = document.getElementsByTagName("html")[0],
          head = document.getElementsByTagName("head")[0];
          
          var mathJax = document.createElement("script");
          mathJax.src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML";
          head.appendChild(mathJax);
          
          html.setAttribute("xmlns:m","http://www.w3.org/1998/Math/MathML");
          
          function inIframe() { try { return window.self !== window.top; } catch (e) { return true; } }
          
          if (!inIframe()) { 
          
          var Default = "index.html?GUID-5040A5F5-7EEE-4A90-BD82-BAF0C39B7F80"; 
          
          var displaylocation = "value" + window.location.href;
          
          var GUIDS = displaylocation.split('GUID');          
          
          if (displaylocation.indexOf('#GUID') != -1) {            
          var First = GUIDS[1].split('.html');  
          if (GUIDS[3]){First = GUIDS[2].split('.html');}
          if (GUIDS[4]){First = GUIDS[3].split('.html');}
          if (GUIDS[5]){First = GUIDS[4].split('.html');}
          
          var Second = GUIDS[2].split('#');   
          if (GUIDS[3]){Second = GUIDS[3].split('#');}
          if (GUIDS[4]){Second = GUIDS[4].split('#');}
          if (GUIDS[5]){Second = GUIDS[5].split('#');}
          
          Default = "index.html?" + "GUID" + First[0] + "GUID" + Second[0];     
          }                    
          window.top.location = Default;
          }       
          
        </script><style xml:space="">
        
          button.copy-code{
            display:none;
            padding:0.7em 1.4em;
            margin:0 0.3em 0.3em 0;
            border-radius:0.15em;
            box-sizing: border-box;
            text-decoration:none;
            font-family:'Roboto',sans-serif;
            text-transform:uppercase;
            font-weight:400;
            color:#FFFFFF;
            background-color:#9c9c9c;
            box-shadow:inset 0 -0.6em 0 -0.35em rgba(0,0,0,0.17);
            text-align:center;
            position:relative;
            border: 0;
            float: right;
            border-radius: .5em;
            cursor: pointer;
          }
          button.copy-code:active{
            top:0.1em;
          }
          
          pre:hover button.copy-code{
            display: inline-block !important;
          }
          button.copy-code.copied {
            cursor: default !important;
          }
          
          
          @media all and (max-width:30em){
            button.copy-code{
              display:block;
              margin:0.4em auto;
            }
          }
        
        
      </style><link rel="stylesheet" type="text/css" href="stylesheets/common-extended.css" /></head>
<body id="building-and-running-the-application-on-sam-e54-curiosity-ultra-development-board">
<h1 class="title topictitle1" id="ariaid-title1">Building and Running the Application on SAM E54 Curiosity Ultra Development Board</h1><div class="body"><p class="p"><strong class="ph b">Downloading and building the application</strong></p>
<p class="p">Path of the application within the repository is <strong class="ph b">apps/micro_speech/firmware</strong></p>
<p class="p">To build the application, refer to the following table and open the project using its IDE.</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><col style="width:" /><col style="width:" /><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="text-align:left;vertical-align:middle;" id="d786e25"><span>Project Name</span></th>
<th class="entry cellrowborder" style="text-align:left;vertical-align:middle;" id="d786e27"><span>Board Configuration</span></th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d786e25 "><span>sam_e54_cult_wm8904_freertos.X</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d786e27 "><span><a class="xref" href="https://www.microchip.com/en-us/development-tool/DM320210" target="_blank">SAM E54 Curiosity Ultra Development Board</a> with <a class="xref" href="https://www.microchip.com/en-us/development-tool/AC328904" target="_blank">PIC32 Audio Codec Daughter Card with WM8904 stereo codec</a></span></td>
</tr>
</tbody>
</table>
</div>
<p class="p"><strong class="ph b">Setting up the hardware</strong></p>
<ul class="ul"><li class="li"><p class="p">Hardware is setup as shown below</p>
</li>
</ul>
<blockquote class="lq"><br /><img class="image" src="GUID-16F322DF-9F61-48C7-8E7E-874D25BD80ED-low.png" alt="micro_speech_sam_e54_cult_wm8904_setup" /><br /></blockquote>
<ul class="ul"><li class="li"><p class="p">Plugin Audio codec daugter board into the set of X32 connectors</p>
</li>
<li class="li"><p class="p">Set the jumpers on the audio codec board as shown below. Each jumper should be connected to the two left-most pins on the board when viewed from the perspective of the audio jack</p>
</li>
</ul>
<blockquote class="lq"><br /><img class="image" src="GUID-5D70C2D3-98E6-4B92-9AA1-4D88E170763E-low.png" alt="micro_speech_wm8904-jumpers_left" /><br /></blockquote>
<ul class="ul"><li class="li"><p class="p">Set the CLK SELECT jumper (J401) so that it connects the MCLK and PA17 pins on the board as shown below. This pin configuration lets the WM8904 act as the clock master to the SAME54’s I2S peripheral.</p>
</li>
</ul>
<blockquote class="lq"><br /><img class="image" src="GUID-B420A36B-D31C-492A-838B-7C2E600EE330-low.png" alt="micro_speech_E54-J401-PA17" /><br /></blockquote>
<ul class="ul"><li class="li"><p class="p">Connect headphones to the green HP OUT jack of the Codec Daughter Board.</p>
</li>
<li class="li"><p class="p">Connect your microphone to pink MIC IN jack of the Codec Daughter Board.</p>
</li>
</ul>
<blockquote class="lq"><br /><img class="image" src="GUID-85410A3B-31C2-44D2-ABC4-213CB4A62AFF-low.png" alt="micro_speech_omnimic_3.5mm" /><br /></blockquote>
<ul class="ul"><li class="li"><p class="p">Connect the Debug USB port on the board to the computer using a micro USB cable.</p>
</li>
</ul>
<p class="p"><strong class="ph b">Running the Application</strong></p>
<ul class="ul"><li class="li"><p class="p">Open the Terminal application (Ex.:Tera term) on the computer</p>
</li>
<li class="li"><p class="p">Connect to the EDBG Virtual COM port and configure the serial settings as follows:</p>
<ul class="ul"><li class="li"><p class="p">Baud : 115200</p>
</li>
<li class="li"><p class="p">Data : 8 Bits</p>
</li>
<li class="li"><p class="p">Parity : None</p>
</li>
<li class="li"><p class="p">Stop : 1 Bit</p>
</li>
<li class="li"><p class="p">Flow Control : None</p>
</li>
</ul>
</li>
<li class="li"><p class="p">Build and Program the application</p>
</li>
<li class="li"><p class="p">Press Switch (SW1) to cycle through four volume levels (one muted)</p>
</li>
<li class="li"><p class="p">The LEDs will light up selectively based on which keyword is detected.</p>
</li>
</ul>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><col style="width:" /><col style="width:" /><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="text-align:left;vertical-align:middle;" id="d786e128"><span>Event</span></th>
<th class="entry cellrowborder" style="text-align:left;vertical-align:middle;" id="d786e130"><span>LED indication</span></th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d786e128 "><span>“YES” keyword detected</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d786e130 "><span>LED1 is turned on for 4 seconds</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d786e128 "><span>“NO” keyword detected</span></td>
<td class="entry cellrowborder" style="text-align:left;vertical-align:middle;" headers="d786e130 "><span>LED2 is turned on for 4 seconds</span></td>
</tr>
</tbody>
</table>
</div>
<ul class="ul"><li class="li"><p class="p">The score corresponding to four classes are displayed on the terminal. The highest scores, "Yes" in this case, is the detected keyword.</p>
</li>
</ul>
<blockquote class="lq"><br /><img class="image" src="GUID-0BB5FE12-F58A-4472-8127-5168C1C22107-low.png" alt="micro_speech_terminal_output" /><br /></blockquote>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="GUID-85C71EF8-14CC-4BC7-814C-1248E7D2D6B6.html">Micro Speech example</a></div>
</div>
</div></body>
</html>